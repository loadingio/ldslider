!function(){var t;function r(t,i){var e,s={}.hasOwnProperty;for(e in i)s.call(i,e)&&(t[e]=i[e]);return t}(t=function(t){var i,e,s,n,o,l=this;if(null==t&&(t={}),this.evtHandler={},this.opt=r({min:0,max:100,from:0,to:0,step:1},t),this.val={to:0,from:0},this.root=t="string"==typeof t.root?document.querySelector(t.root):t.root,"INPUT"===this.root.tagName){for(this.input=this.root,ld$.attr(this.input,"type","hidden"),this.root=t=document.createElement("div"),this.input.parentNode.insertBefore(this.root,this.input),i=0,e=this.input.classList.length;i<e;++i)s=i,this.root.classList.add(this.input.classList[s]);this.input.setAttribute("class",""),(n=this.input.getAttribute("data-class"))&&this.input.classList.add.apply(this.input.classList,n.split(" ")),this.input.addEventListener("change",n=function(){var t;return l.range?(t=(l.input.value||"").split(/\s*~\s*/),t={from:parseFloat((t[0]||"").trim()),to:parseFloat((t[1]||"").trim())},isNaN(t.from)&&(t.from=0),isNaN(t.to)&&(t.from=0),l.repos(t.from,!0,!1,!0,!1),l.repos(t.to,!0,!1,!0,!0)):(t=parseFloat((l.input.value||"").trim()),isNaN(t)&&(t=0),l.repos(t,!0,!1,!0))}),this.input.addEventListener("input",n)}return"undefined"!=typeof ResizeObserver&&null!==ResizeObserver&&new ResizeObserver(function(t){return l.set(l.get())}).observe(this.root),(this.root._ldrs=this).root.classList.add("ldrs"),this.root.innerHTML='<div class="bar">\n  <div class="cap"></div>\n  <div class="cap"></div>\n  <div class="bar-inner">\n    <div class="bk"></div>\n    <div class="fg"></div>\n    <div class="line lock"></div>\n    <div class="line p"></div>\n    <div class="hint p"></div>\n    <div class="line p alt"></div>\n    <div class="hint p alt"></div>\n  </div>\n</div>\n<div class="hint l"></div>\n<div class="hint lock"></div>\n<div class="hint r"></div>',this.el=n={b:{fg:ld$.find(t,".fg",0)},p:ld$.find(t,".line.p",0),q:ld$.find(t,".line.p.alt",0),h:{p:ld$.find(t,".hint.p",0),q:ld$.find(t,".hint.p.alt",0),l:ld$.find(t,".hint.l",0),r:ld$.find(t,".hint.r",0),lock:ld$.find(t,".hint.lock",0),lockLine:ld$.find(t,".lock-line",0)}},o={move:function(t){return 1&t.buttons?l.repos(t.clientX,!0,!0,!1,o.alt):o.up(t)},up:function(){var t;return document.removeEventListener("mouseup",o.up),document.removeEventListener("mousemove",o.move),(t=o.alt?[l.el.h.q,l.val.to]:[l.el.h.p,l.val.from])[0].innerText=l.label.ptr(Math.round(1e4*t[1])/1e4)},prepare:function(t){return o.alt=!!(t.target&&t.target.classList&&t.target.classList.contains("alt")),document.addEventListener("mousemove",o.move),document.addEventListener("mouseup",o.up)}},n.p.addEventListener("mousedown",o.prepare),t.addEventListener("click",o.move),t.addEventListener("mousedown",o.prepare),this.prepare(),this}).prototype=r(Object.create(Object.prototype),{on:function(t,i){var e;return((e=this.evtHandler)[t]||(e[t]=[])).push(i)},fire:function(t){for(var i,e,s,n,o=[],l=[],r=1,a=arguments.length;r<a;++r)l.push(arguments[r]);for(i=l,r=0,s=(e=this.evtHandler[t]||[]).length;r<s;++r)n=e[r],o.push(n.apply(this,i));return o},update:function(){return this.range?this.set(this.val):this.set(this.val.from)},updateInput:function(t){var i=this,t=(null!=t?t:{now:!1}).now;return clearTimeout(this.debounce),this.debounce=setTimeout(function(){var t;if(i.range){if(t=i.val.from+" ~ "+i.val.to,i.input.value!==t)return i.input.value=t}else if(i.input.value!==i.val.from)return i.input.value=i.val.from},t?0:500)},edit:function(t){if(this.input)return null==t&&(t="hidden"===this.input.getAttribute("type")),this.input.setAttribute("type",t?"text":"hidden"),this.root.style.display=t?"none":"",t?void 0:this.update()},prepare:function(){var i=this;return null!=this.opt.from&&(this.val.from=this.opt.from),null!=this.opt.to&&(this.val.to=this.opt.to),this.opt.exp&&(this.expFactor=Math.log(this.opt.exp.output||this.opt.max-this.opt.min)/Math.log(this.opt.exp.input)),this.label=r({ptr:function(t){return t===i.opt.min&&null!=i.label.min?i.label.min:t===i.opt.max&&null!=i.label.max?i.label.max:t}},this.opt.label||{}),this.el.h.l.innerText=(null!=this.label.min?this.label:this.opt).min,this.el.h.r.innerText=(null!=this.label.max?this.label:this.opt).max,this.el.h.p.innerText=this.label.ptr(this.opt.from),this.el.h.q.innerText=this.label.ptr(this.opt.to),this.root.classList[null!=this.opt.limitMax?"add":"remove"]("limit"),this.range=null!=this.opt.range?this.opt.range:!!this.root.classList.contains("range"),this.range&&this.root.classList.toggle("range",this.range),this.update()},setConfig:function(t){return this.opt=r({},t=null==t?{}:t),this.prepare()},set:function(t,i){return null==i&&(i=!1),this.range?(this.repos(t.from,i,!1,!1,!1),this.repos(t.to,i,!1,!1,!0)):this.repos(t,i)},get:function(){return this.range?this.val:this.val.from},repos:function(t,i,e,s,n){var o,l,r,a,h,p,u,d,m,v,c,f,x;for(c in null==i&&(i=!1),null==e&&(e=!1),null==s&&(s=!1),l=this.val[o=(n=null==n?!1:n)?"to":"from"],r=this.el.h[n?"q":"p"],n=.6*(h=(a=this.el[n?"q":"p"]).parentNode.getBoundingClientRect()).width,e?(m=(p=(u=0<(d=t-h.x)?d:0)<(f=h.width)?u:f)/h.width,this.expFactor&&(m=Math.pow(m,this.expFactor)),x=this.opt.min+(this.opt.max-this.opt.min)*m,null!=this.opt.limitMax&&(x=n<p?this.opt.limitMax+(this.opt.max-this.opt.limitMax)*(p-n)/(h.width-n):(m=p/n,this.expFactor&&(m=Math.pow(m,this.expFactor)),this.opt.min+this.opt.limitMax*m))):x=t,x=t=(u=(d=this.opt.min+Math.round((x-this.opt.min)/this.opt.step)*this.opt.step)>(m=this.opt.min)?d:m)<(f=this.opt.max)?u:f,this.val[o]=x,v={},u=this.val)t=u[c],!this.range&&"to"===c||(p=null!=this.opt.limitMax?t>this.opt.limitMax?(t-this.opt.limitMax)/(this.opt.max-this.opt.limitMax)*40+60:this.expFactor?60*Math.pow((t-this.opt.min)/(this.opt.limitMax-this.opt.min),1/this.expFactor):60*(t-this.opt.min)/(this.opt.limitMax-this.opt.min):this.expFactor?100*Math.pow((t-this.opt.min)/(this.opt.max-this.opt.min),1/this.expFactor):(t-this.opt.min)/(this.opt.max-this.opt.min)*100,null!=this.opt.limitMax&&this.opt.limitHard&&(60<p&&(p=60),t>this.opt.limitMax&&(t=this.opt.limitMax)),this.val[c]=t,v[c]=p);if(p=v[o],t=this.val[o],f=this.range?Math.min(v.from,v.to)+.5:0,x=this.range?Math.max(v.from,v.to)-f+.5:v.from,r.getBoundingClientRect(),r.innerText=this.label.ptr(Math.round(1e4*t)/1e4),r.style.left=.01*p*h.width*100/h.width+"%",r.style.transform="translate(-50%,0)",a.style.left=p+"%",this.el.b.fg.style.width=x+"%",this.el.b.fg.style.left=f+"%",t!==l&&i&&this.fire("change",this.range?this.val:this.val[o]),this.input)return this.updateInput({now:!s})}}),"undefined"!=typeof module&&null!==module?module.exports=t:"undefined"!=typeof window&&null!==window&&(window.ldslider=t)}.call(this);
